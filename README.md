# README

## 目的
- サーバクライアント間でファイル転送を行う．
- DHCP の時と同様ソケットプログラミングについて理解を深めるため自作 FTP を制作した．

## 機能
ユーザは以下のコマンドを用いて，FTP サーバのディレクトリ構造を知ることやサーバからデータを取得することができる．また，ユーザ側から FTP サーバへデータを転送することも可能である．

1. pwd コマンド: サーバにおけるカレントディレクトリを表示する．
2. cd コマンド： サーバにおいてカレントディレクトリを移動する．
3. dir コマンド: サーバのディレクトリ情報，即ちサーバに存在するファイルの情報を示す．
4. lpwd コマンド: クライアントにおけるカレントディレクトリを表示する．
5. lcd コマンド： クライアントにおいてカレントディレクトリを移動する．
6. ldir コマンド: クライアントのディレクトリ情報を示す．
7. get コマンド： サーバからクライアントへファイル転送をする．
8. put コマンド： クライアントからサーバへファイル転送をする．

## 通信について
- 通信では TCP を利用する．
- DHCP の際と同様に，メッセージを使ってユーザから受け取ったコマンドの内容を通信する．FTP では各コマンドに対応するメッセージを用意する．

##　仕様
- FTP クライアントは，ユーザからのコマンドを標準入力で受け付ける．
- サーバ、クライアントはそれぞれメッセージを受信するとその旨を表示する.

## 反省
- クライアント•サーバ共通事項: get, put コマンドでファイル転送が失敗し， Undefined Error になった際に復旧ができない．
これは read, write で失敗した後，その失敗したソケットのまま処理を続けてしまうことが原因だと考える．
即ち，エラーが生じた際はそれを検知し，新しいソケットを立ち上げる必要がある．
- クライアント側: get コマンドでデータを受信する際に Data フィールドの一部を有効活用せずにデータを受信をしている．
これは受信するデータについて，後続のデータがなければ，受信処理を行う関数から抜け出すよう実装を試みたが，上手くいかなかったためである．

## 工夫したこと
- FTP の開発はシェル，DHCP の開発の後に行ったため，二つの開発の反省を生かして，より綺麗なコードを書くことを心掛けた．
- DHCP の時と同様状態遷移図を活用することにより，行うべきことを常に整理した状態で開発を進めることができた．